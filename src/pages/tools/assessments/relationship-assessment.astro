---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Assessment from '../../../components/Assessment';
import { Brain, AlertCircle, CheckCircle, Info, Heart } from 'lucide-react';

// Relationship Health Assessment - Based on Gottman research and relationship therapy
const relationshipQuestions = [
  {
    id: 'q1',
    text: 'How satisfied are you with the overall quality of your relationship?',
    options: [
      { text: 'Very satisfied', value: 0 },
      { text: 'Satisfied', value: 1 },
      { text: 'Neutral', value: 2 },
      { text: 'Dissatisfied', value: 3 },
      { text: 'Very dissatisfied', value: 4 }
    ]
  },
  {
    id: 'q2',
    text: 'How well do you and your partner communicate about important issues?',
    options: [
      { text: 'Very well', value: 0 },
      { text: 'Fairly well', value: 1 },
      { text: 'Somewhat poorly', value: 2 },
      { text: 'Very poorly', value: 3 },
      { text: 'Extremely poorly', value: 4 }
    ]
  },
  {
    id: 'q3',
    text: 'How often do you and your partner have conflicts or arguments?',
    options: [
      { text: 'Rarely', value: 0 },
      { text: 'Occasionally', value: 1 },
      { text: 'Sometimes', value: 2 },
      { text: 'Frequently', value: 3 },
      { text: 'Very frequently', value: 4 }
    ]
  },
  {
    id: 'q4',
    text: 'When you disagree, how constructive are your conversations?',
    options: [
      { text: 'Very constructive', value: 0 },
      { text: 'Fairly constructive', value: 1 },
      { text: 'Sometimes destructive', value: 2 },
      { text: 'Often destructive', value: 3 },
      { text: 'Always destructive', value: 4 }
    ]
  },
  {
    id: 'q5',
    text: 'How much do you trust your partner?',
    options: [
      { text: 'Completely', value: 0 },
      { text: 'Mostly', value: 1 },
      { text: 'Somewhat', value: 2 },
      { text: 'Very little', value: 3 },
      { text: 'Not at all', value: 4 }
    ]
  },
  {
    id: 'q6',
    text: 'How satisfied are you with the emotional intimacy in your relationship?',
    options: [
      { text: 'Very satisfied', value: 0 },
      { text: 'Satisfied', value: 1 },
      { text: 'Neutral', value: 2 },
      { text: 'Dissatisfied', value: 3 },
      { text: 'Very dissatisfied', value: 4 }
    ]
  },
  {
    id: 'q7',
    text: 'How supported do you feel by your partner?',
    options: [
      { text: 'Very supported', value: 0 },
      { text: 'Fairly supported', value: 1 },
      { text: 'Somewhat supported', value: 2 },
      { text: 'Not very supported', value: 3 },
      { text: 'Not at all supported', value: 4 }
    ]
  },
  {
    id: 'q8',
    text: 'How well do you and your partner handle responsibilities together?',
    options: [
      { text: 'Very well', value: 0 },
      { text: 'Fairly well', value: 1 },
      { text: 'With some difficulty', value: 2 },
      { text: 'With significant difficulty', value: 3 },
      { text: 'Very poorly', value: 4 }
    ]
  },
  {
    id: 'q9',
    text: 'How satisfied are you with how you and your partner spend quality time together?',
    options: [
      { text: 'Very satisfied', value: 0 },
      { text: 'Satisfied', value: 1 },
      { text: 'Neutral', value: 2 },
      { text: 'Dissatisfied', value: 3 },
      { text: 'Very dissatisfied', value: 4 }
    ]
  },
  {
    id: 'q10',
    text: 'How hopeful are you about the future of your relationship?',
    options: [
      { text: 'Very hopeful', value: 0 },
      { text: 'Hopeful', value: 1 },
      { text: 'Uncertain', value: 2 },
      { text: 'Not very hopeful', value: 3 },
      { text: 'Not hopeful at all', value: 4 }
    ]
  }
];

const scoringGuide = [
  {
    min: 0,
    max: 10,
    severity: 'Healthy Relationship',
    color: 'green',
    description: 'Your responses suggest a healthy, well-functioning relationship. You and your partner appear to have strong communication, trust, and connection.'
  },
  {
    min: 11,
    max: 20,
    severity: 'Good Relationship with Growth Areas',
    color: 'yellow',
    description: 'Your relationship appears generally healthy with some areas that could benefit from attention. Most couples experience challenges in certain areas.'
  },
  {
    min: 21,
    max: 30,
    severity: 'Relationship Needs Attention',
    color: 'orange',
    description: 'Your responses suggest significant challenges in your relationship. Couples therapy could help you and your partner develop better communication and connection.'
  },
  {
    min: 31,
    max: 35,
    severity: 'Relationship in Distress',
    color: 'red',
    description: 'Your relationship appears to be experiencing significant distress. We strongly recommend couples therapy with a licensed relationship therapist.'
  },
  {
    min: 36,
    max: 40,
    severity: 'Critical Relationship Issues',
    color: 'red',
    description: 'Your responses indicate critical relationship issues. Please consider seeking immediate professional help from a couples therapist or relationship counselor.'
  }
];

const recommendations = {
  'healthy relationship': 'Continue nurturing your relationship through quality time, open communication, and mutual support. Consider occasional "relationship check-ins" to maintain your strong connection.',
  'good relationship with growth areas': 'Identify the specific areas rated lower and work on them together. Consider reading relationship books, attending workshops, or occasional couples counseling for growth.',
  'relationship needs attention': 'We recommend couples therapy with a licensed relationship therapist. Evidence-based approaches like Gottman Method or Emotionally Focused Therapy (EFT) can significantly improve relationship satisfaction.',
  'relationship in distress': 'Please schedule an appointment with a couples therapist as soon as possible. Professional guidance can help you and your partner improve communication and rebuild connection.',
  'critical relationship issues': 'Immediate couples therapy is strongly recommended. A relationship therapist can help you assess whether the relationship can be improved or help you navigate difficult decisions.'
};
---

<BaseLayout>
  {/* Hero Section */}
  <section class="bg-gradient-to-b from-white via-brand-primary-50/30 to-white pt-16 pb-12 md:pt-24 md:pb-16">
    <div class="max-w-7xl mx-auto px-6 lg:px-12">
      <h1 class="font-heading text-4xl md:text-5xl lg:text-6xl font-bold text-neutral-900 mb-6">Relationship Health Assessment</h1>
      <p class="font-serif italic text-lg md:text-xl text-neutral-600">
        Evaluate your relationship dynamics and identify areas for growth
      </p>
    </div>
  </section>

  {/* Main Content */}
  <section class="bg-white py-12 md:py-16">
    <div class="max-w-7xl mx-auto px-6 lg:px-12">

      {/* Information Cards */}
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <div class="bg-blue-50 rounded-lg p-6 border-l-4 border-blue-500">
          <div class="flex items-start">
            <Info class="h-6 w-6 text-blue-600 mr-3 mt-0.5 flex-shrink-0" />
            <div>
              <h3 class="font-bold text-gray-900 mb-2">Research-Based</h3>
              <p class="text-gray-700 text-sm">
                Based on relationship research and therapeutic frameworks including Gottman Method principles.
              </p>
            </div>
          </div>
        </div>

        <div class="bg-green-50 rounded-lg p-6 border-l-4 border-green-500">
          <div class="flex items-start">
            <Heart class="h-6 w-6 text-green-600 mr-3 mt-0.5 flex-shrink-0" />
            <div>
              <h3 class="font-bold text-gray-900 mb-2">Takes 3 Minutes</h3>
              <p class="text-gray-700 text-sm">
                Answer 10 questions about communication, trust, intimacy, and relationship satisfaction.
              </p>
            </div>
          </div>
        </div>

        <div class="bg-yellow-50 rounded-lg p-6 border-l-4 border-yellow-500">
          <div class="flex items-start">
            <AlertCircle class="h-6 w-6 text-yellow-600 mr-3 mt-0.5 flex-shrink-0" />
            <div>
              <h3 class="font-bold text-gray-900 mb-2">For Reflection</h3>
              <p class="text-gray-700 text-sm">
                This assessment reflects your perspective. Consider taking it together with your partner.
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Assessment Component */}
      <Assessment
        client:load
        title="How would you describe your relationship?"
        description="Please answer honestly based on your current experience in your relationship."
        questions={relationshipQuestions}
        scoringGuide={scoringGuide}
        recommendations={recommendations}
      />

      {/* Additional Resources */}
      <div class="mt-12 bg-gradient-to-r from-brand-primary-50 to-brand-secondary-50 rounded-lg p-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-6">Next Steps & Resources</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h4 class="font-bold text-gray-900 mb-3 flex items-center">
              <CheckCircle class="h-5 w-5 text-brand-primary mr-2" />
              Find Couples Therapy
            </h4>
            <ul class="space-y-2 text-gray-700">
              <li><a href="/best/audiences/best-for-couples" class="text-brand-primary hover:underline">Best Online Couples Therapy</a></li>
              <li><a href="/tools/matchers/therapy-platform-matcher" class="text-brand-primary hover:underline">Find a Relationship Therapist</a></li>
              <li><a href="/reviews/specialty/couples-therapy" class="text-brand-primary hover:underline">Couples Therapy Reviews</a></li>
            </ul>
          </div>

          <div>
            <h4 class="font-bold text-gray-900 mb-3 flex items-center">
              <CheckCircle class="h-5 w-5 text-brand-primary mr-2" />
              Learn About Relationships
            </h4>
            <ul class="space-y-2 text-gray-700">
              <li><a href="/learn/fundamentals/relationship-counseling" class="text-brand-primary hover:underline">Understanding Relationship Counseling</a></li>
              <li><a href="/learn/fundamentals/mindfulness" class="text-brand-primary hover:underline">Mindfulness in Relationships</a></li>
              <li><a href="/learn/fundamentals/supporting-loved-ones" class="text-brand-primary hover:underline">Supporting Your Partner</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
