@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Supabase color palette */
  --sb-brand-primary: #3ecf8e;
  --sb-brand-secondary: #00c8ff;
  --sb-dark-900: #1f1f1f;
  --sb-dark-800: #2e2e2e;
  --sb-dark-700: #3e3e3e;
  --sb-dark-600: #4d4d4d;
  --sb-dark-500: #5c5c5c;
  --sb-dark-400: #6b6b6b;
  --sb-dark-300: #7a7a7a;
  --sb-dark-200: #898989;
  --sb-dark-100: #989898;
  --sb-gray-900: #a7a7a7;
  --sb-gray-800: #b6b6b6;
  --sb-gray-700: #c5c5c5;
  --sb-gray-600: #d4d4d4;
  --sb-gray-500: #e3e3e3;
  --sb-gray-400: #f2f2f2;
  --sb-gray-300: #f7f7f7;
  --sb-gray-200: #fbfbfb;
  --sb-gray-100: #fcfcfc;
  --sb-white: #ffffff;

  /* Fluid typography */
  --fluid-min-width: 320;
  --fluid-max-width: 1440;
  --fluid-min-size: 16;
  --fluid-max-size: 19;
  --fluid-min-scale: 1.2;
  --fluid-max-scale: 1.333;

  /* Fluid spacing */
  --space-unit: clamp(1rem, 1vw, 1.5rem);
  --space-xs: calc(var(--space-unit) * 0.5);
  --space-sm: var(--space-unit);
  --space-md: calc(var(--space-unit) * 2);
  --space-lg: calc(var(--space-unit) * 3);
  --space-xl: calc(var(--space-unit) * 4);
  --space-2xl: calc(var(--space-unit) * 6);

  /* Container widths */
  --container-max-width: min(92%, 1440px);
  --container-narrow-max-width: min(92%, 1024px);
}

@layer base {
  html {
    font-size: clamp(
      var(--fluid-min-size)px,
      calc(var(--fluid-min-size)px + (var(--fluid-max-size) - var(--fluid-min-size)) * 
        ((100vw - (var(--fluid-min-width)px)) / 
          (var(--fluid-max-width) - var(--fluid-min-width)))),
      var(--fluid-max-size)px
    );
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    @apply bg-gray-50 text-gray-800 font-sans antialiased;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-sans font-bold;
    line-height: calc(2px + 2ex + 2px);
  }

  /* Fluid heading sizes */
  h1 {
    font-size: clamp(2rem, 5vw, 3rem);
  }

  h2 {
    font-size: clamp(1.5rem, 4vw, 2.25rem);
  }

  h3 {
    font-size: clamp(1.25rem, 3vw, 1.75rem);
  }

  h4 {
    font-size: clamp(1.125rem, 2vw, 1.5rem);
  }

  /* Touch target sizing */
  @media (pointer: coarse) {
    button, 
    [role="button"],
    a {
      min-height: 44px;
      min-width: 44px;
      padding: 0.75rem;
    }

    input,
    select,
    textarea {
      min-height: 44px;
    }
  }

  /* Improved focus styles */
  :focus-visible {
    @apply outline-none ring-2 ring-indigo-500 ring-offset-2;
  }

  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer components {
  /* Buttons */
  .sb-btn {
    @apply px-4 py-2 rounded-md font-medium transition-all duration-200 inline-flex items-center justify-center;
    min-height: 44px;
    min-width: 44px;
  }
  
  .sb-btn-primary {
    @apply bg-emerald-500 hover:bg-emerald-600 text-white;
  }
  
  .sb-btn-secondary {
    @apply bg-cyan-500 hover:bg-cyan-600 text-white;
  }
  
  .sb-btn-outline {
    @apply border-2 border-emerald-500 text-emerald-500 hover:bg-emerald-50;
  }
  
  .sb-btn-dark {
    @apply bg-gray-800 hover:bg-gray-900 text-white;
  }
  
  .sb-btn-light {
    @apply bg-white hover:bg-gray-100 text-gray-800 border border-gray-200;
  }
  
  /* Cards */
  .sb-card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all duration-200;
  }
  
  .sb-card-hover {
    @apply hover:shadow-md hover:border-emerald-200;
  }
  
  /* Gradients */
  .sb-gradient-primary {
    @apply bg-gradient-to-r from-emerald-500 to-cyan-500;
  }
  
  .sb-gradient-dark {
    @apply bg-gradient-to-r from-gray-800 to-gray-900;
  }
  
  /* Text */
  .sb-text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-emerald-500 to-cyan-500;
  }
  
  /* Inputs */
  .sb-input {
    @apply w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent;
    min-height: 44px;
  }
  
  /* Badges */
  .sb-badge {
    @apply px-2 py-1 rounded-full text-xs font-medium;
  }
  
  .sb-badge-primary {
    @apply bg-emerald-100 text-emerald-800;
  }
  
  .sb-badge-secondary {
    @apply bg-cyan-100 text-cyan-800;
  }
  
  .sb-badge-dark {
    @apply bg-gray-800 text-white;
  }
  
  .sb-badge-light {
    @apply bg-gray-100 text-gray-800;
  }
  
  /* Container with responsive padding */
  .sb-container {
    @apply container mx-auto;
    padding-inline: clamp(1rem, 5vw, 2rem);
    max-width: var(--container-max-width);
  }

  .sb-container-narrow {
    @apply container mx-auto;
    padding-inline: clamp(1rem, 5vw, 2rem);
    max-width: var(--container-narrow-max-width);
  }

  /* Responsive grid layouts */
  .sb-grid {
    display: grid;
    gap: var(--space-md);
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
  }

  .sb-grid-tight {
    display: grid;
    gap: var(--space-sm);
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 250px), 1fr));
  }

  .sb-grid-wide {
    display: grid;
    gap: var(--space-lg);
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 350px), 1fr));
  }

  /* Responsive spacing utilities */
  .sb-stack {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .sb-stack-sm {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .sb-stack-lg {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  /* Responsive images */
  .sb-img-responsive {
    @apply w-full h-auto object-cover;
    aspect-ratio: attr(width) / attr(height);
  }

  .sb-img-cover {
    @apply w-full h-full object-cover;
    aspect-ratio: attr(width) / attr(height);
  }
}